#include <stdio.h>

void initializeGame(int board[2][7]);
void printBoard(int board[2][7]);
void gamePlay(int board[2][7]);
void move(int board[2][7],int cup,int turn);
int check_end(int board[2][7]);
void print_summary(int board[2][7]);

void print_summary(int board[2][7]){
    if (board[0][6]>board[1][6]){
        printf("+-------------------------------------------------------------+\n");
        printf("+------------------- Player wins the game!!! ----------------+\n");
    }
    else if (board[0][6]<board[1][6]){
        printf("+-------------------------------------------------------------+\n");
        printf("+------------------- Computer wins the game!!! --------------+\n");
    }
    else{
        printf("+-------------------------------------------------------------+\n");
        printf("+------------------- The game is a draw!!! ------------------+\n");
    }
}

int check_end(int board[2][7]){
    int ret;
    if ((board[0][0]==0 && board[0][1]==0 && board[0][2]==0 &&  board[0][3]==0 &&  board[0][4]==0 &&  board[0][5]==0 &&  board[0][6]==0) || (board[1][0]==0 && board[1][1]==0 && board[1][2]==0 &&  board[1][3]==0 &&  board[1][4]==0 &&  board[1][5]==0 &&  board[1][6]==0))
    {ret=1;}
    else ret=0;
    return ret;
}

int main(){
    int board[2][7]; /* 0-5: player 1, 6: store 1, 7-12: player 2, 13: store 2*/
    initializeGame(board);
    printBoard(board);
    gamePlay(board);
    return 0;
}

void initializeGame(int board[2][7]){
    int i,n=0;
    while (n<1){
        printf("Please enter the number of stones for each cup: ");
        scanf("%d", &n);
        if(n>=1) {
            for(i = 0; i < 7; i++){
                board[0][i] = n;
                board[1][i] = n;
            }
            board[0][6] = 0;
            board[1][6] = 0;
        }
        else printf ("Game size can't be less than 1\n");
    }
}

void printBoard(int board[2][7]){
    int i;
    printf("+------------+-----+-----+-----+-----+-----+-----+------------+\n");
    printf("+  Computer  |                                   |   Player   +\n");
    printf("+------------+-----+-----+-----+-----+-----+-----+------------+\n");
    printf("|            | %2d  | %2d  | %2d  | %2d  | %2d  | %2d  |            |\n", board[1][5], board[1][4], board[1][3], board[1][2], board[1][1], board[1][0]);
    printf("|    %2d      |-----|-----|-----|-----|-----|-----|     %2d     |\n", board[1][6], board[0][6]);
    printf("|            | %2d  | %2d  | %2d  | %2d  | %2d  | %2d  |            |\n", board[0][0], board[0][1], board[0][2], board[0][3], board[0][4], board[0][5]);
    printf("+------------+-----+-----+-----+-----+-----+-----+------------+\n");
    printf("Cups:           1     2     3     4     5     6\n");
}

void gamePlay(int board[2][7]){
    int first_turn = 1, turn=1, cup,i,largestnum=0,largestadress;
    while (turn!=0){
        if (turn==1){
            printf("Player's turn\n");
            while (cup < 1 || cup > 6 || board[0][cup-1]==0){
                printf("Please enter the cup number you want to move: ");
                scanf("%d", &cup);
                getchar();
                if (cup < 1 || cup > 6 || board[0][cup-1]==0){
                    printf("Invalid cup number\n");
                }
            }
            move(board, cup-1, turn);
            if (check_end==1) turn=0;
            else if (check_end==0) turn=2;
        }

        else if (turn==2){
            printf("Computer's turn\n");
            for(i=0 ; i<=6 ; i++){
                if (board[1][i]!=0){
                    if (6-board[1][i]==0) largestnum=999999,largestadress=i;
                    if(largestnum < board[1][i])largestnum = board[1][i],largestadress=i;
                }
                move(board,largestadress+7,2);
            }
        }
    }
    if (turn==0){
        print_summary(board);
    }
}

void move(int board[2][7],int cup,int turn){
    int i,j,n;
    if(turn==1){
        
    }
    if (turn==2){

    }
}
